{% extends 'base.html.twig' %}

{% block body %}
<div class="py-20 bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen">

    <h1 class="text-5xl md:text-7xl font-extrabold text-center text-gray-800 mb-16">
        Toutes les offres d'emploi & stage
    </h1>

    <div class="grid md:grid-cols-3 sm:grid-cols-2 gap-10 max-w-7xl mx-auto px-6">

        {% for offer in offers %}
        <div class="bg-white rounded-3xl shadow-lg overflow-hidden transform hover:scale-105 hover:shadow-2xl transition-all duration-300">

            <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-8 text-center">
                <h3 class="text-2xl md:text-3xl font-semibold">{{ offer.title }}</h3>
                <p class="text-lg mt-2 font-medium">{{ offer.recruiter.companyName }}</p>
            </div>

            <div class="p-8">
                <p class="text-gray-700 mb-4 line-clamp-3">
                    {{ offer.description|striptags|slice(0, 180) ~ '...' }}
                </p>

                <div class="flex justify-between items-center mb-4">
                    <span class="text-xl font-bold text-green-600">
                        {{ offer.salary ? offer.salary ~ ' DT' : 'NÃ©gociable' }}
                    </span>
                    <span class="bg-purple-100 text-purple-800 px-4 py-2 rounded-full font-medium text-sm">
                        {{ offer.location }}
                    </span>
                </div>

                <div class="flex flex-wrap gap-2">
                    <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full text-sm">
                        {{ offer.contractType }}
                    </span>
                    {% if offer.isRemote %}
                        <span class="bg-green-100 text-green-800 px-4 py-2 rounded-full text-sm">
                            Remote OK
                        </span>
                    {% endif %}
                </div>
            </div>

            <div class="px-6 pb-8 pt-4 bg-gray-50 text-center">
                {% if is_granted('ROLE_CANDIDATE') %}
                    <a href="{{ path('joboffer_apply_form', { id: offer.id }) }}"
                       class="bg-gradient-to-r from-green-500 to-emerald-600 text-white font-semibold text-lg px-8 py-3 rounded-full shadow-lg transform hover:scale-105 transition-all duration-300">
                        POSTULER MAINTENANT
                    </a>
                {% else %}
                    <a href="{{ path('app_login') }}"
                       class="bg-blue-600 text-white font-semibold text-lg px-8 py-3 rounded-full shadow-lg transform hover:scale-105 transition-all duration-300">
                        Se connecter pour postuler
                    </a>
                {% endif %}
            </div>

        </div>
        {% else %}
            <p class="text-center col-span-full text-gray-500 text-xl mt-10">
                Aucune offre disponible pour le moment.
            </p>
        {% endfor %}
    </div>
</div>
{% endblock %}
